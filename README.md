# The Perfect Monorepo! (based on my questionable technical decisions)

*A complete, minimal, type-safe starter for modern web software. No overengineering, no legacy, just velocity.*

## ğŸ§° What's Inside

This monorepo gives you a rock-solid base for fullstack development:

### ğŸ•¸ Web

> Located in `apps/web/`

* **React 19** â€“ Concurrent, modern, built to last
* **Vite** â€“ Lightning-fast build/dev
* **Tailwind CSS 4** â€“ Utility-first styling
* **TanStack Router** â€“ File-based routing, no magic
* **TanStack Query** â€“ The right way to fetch
* **Shadcn UI** â€“ Radix-powered headless UI layer
* **Recharts** â€“ Dashboard-ready charts
* **React Hook Form + Zod** â€“ Schema-first forms
* **Kubb** â€“ Typed API clients via OpenAPI
* **Clerk React** â€“ Fullstack authentication and authorization, session sync via cookies

### âš™ï¸ API

> Located in `apps/api/`

* **Elysia** â€“ Fast, expressive Bun-native backend
* **Drizzle ORM + TypeBox** â€“ SQL-first with strong typing
* **PostgreSQL** â€“ Just works
* **Swagger** â€“ Docs you can share without shame
* **Clerk Backend SDK** â€“ Simple user validation and session verification

### ğŸ§± Tooling

* **Bun** â€“ Unified package manager, runtime, and bundler
* **Biome** â€“ All-in-one formatter and linter
* **Turborepo** â€“ Caching and orchestration done right

## ğŸƒ Getting Started

```bash
bun install # installs all dependencies in all apps
bun setup # sets up .env files for all apps
bun gen # generates front-end services for consuming the API
bun dev # starts both frontend and backend in dev mode
```

Use `bun run build` in individual apps for production builds.

## ğŸ” Authentication

### Frontend

* Automatically handled via **Clerk React**.
* API client generated by **Kubb** injects the `Authorization: Bearer <token>` header from the `__session` cookie automatically â€” no need to manually pass tokens.
* Session sync is handled by Clerk via secure, http-only cookies.

### Backend

* Secured via **Clerk Backend SDK**.
* Middleware `ClerkAuth` verifies incoming requests:

  * Extracts session token from `Authorization` header or cookies.
  * Validates session and retrieves the full user object.
  * Injects user context into the request lifecycle.

Example usage in API:

```ts
app.use(ClerkAuth)

app.get('/api/profile', ({ user }) => {
  return `Hello, ${user.firstName}`
})
```

No need for repetitive token extraction or validation logic.

## ğŸ³ Docker

Each app can be containerized separately. Example:

```bash
# Web
docker build -t web apps/web
docker run -p 3000:80 web

# API
docker build -t api apps/api
docker run -p 8000:8000 api
```

## ğŸ—‚ Structure

```
.
â”œâ”€â”€ apps/                    # Monorepo applications
â”‚   â”œâ”€â”€ web/                # React frontend
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”‚   â”œâ”€â”€ components/ # Organized React components
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ui/     # Base components (shadcn/ui)
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ shared/ # Shared application components
â”‚   â”‚   â”‚   â”œâ”€â”€ routes/     # File-based routing (TanStack Router)
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ auth/   # Authentication routes
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ app/    # Protected application routes
â”‚   â”‚   â”‚   â”œâ”€â”€ hooks/      # Custom React hooks
â”‚   â”‚   â”‚   â”œâ”€â”€ lib/        # Library configurations
â”‚   â”‚   â”‚   â”œâ”€â”€ utils/      # Utility functions
â”‚   â”‚   â”‚   â”œâ”€â”€ providers/  # Context providers
â”‚   â”‚   â”‚   â””â”€â”€ gen/        # Generated code (Kubb - API client)
â”‚   â”‚   â”œâ”€â”€ public/         # Static assets
â”‚   â”‚   â””â”€â”€ Dockerfile      # Web application container
â”‚   â”‚
â”‚   â””â”€â”€ api/                # Elysia backend (DDD Architecture)
â”‚       â”œâ”€â”€ src/
â”‚       â”‚   â”œâ”€â”€ application/      # Application layer (Use Cases)
â”‚       â”‚   â”‚   â””â”€â”€ use-cases/    # Application use cases
â”‚       â”‚   â”œâ”€â”€ domain/           # Domain layer (Business rules)
â”‚       â”‚   â”‚   â””â”€â”€ entities/     # Domain entities
â”‚       â”‚   â”œâ”€â”€ infrastructure/   # Infrastructure layer
â”‚       â”‚   â”‚   â”œâ”€â”€ auth/         # Authentication configuration
â”‚       â”‚   â”‚   â”œâ”€â”€ config/       # Application configurations
â”‚       â”‚   â”‚   â””â”€â”€ database/     # Database configuration and migrations
â”‚       â”‚   â”œâ”€â”€ presentation/     # Presentation layer (HTTP API)
â”‚       â”‚   â”‚   â”œâ”€â”€ controllers/  # Route controllers
â”‚       â”‚   â”‚   â”œâ”€â”€ middlewares/  # Custom middlewares
â”‚       â”‚   â”‚   â””â”€â”€ http/         # HTTP route configuration
â”‚       â”‚   â””â”€â”€ index.ts          # Application entry point
â”‚       â”œâ”€â”€ drizzle.config.ts     # Drizzle ORM configuration
â”‚       â”œâ”€â”€ openapi.json          # Generated OpenAPI specification
â”‚       â””â”€â”€ Dockerfile            # API container
â”‚
â”œâ”€â”€ .husky/                 # Git hooks for code quality
â”œâ”€â”€ turbo.json              # Turborepo configuration
â”œâ”€â”€ docker-compose.yml      # Container orchestration
â”œâ”€â”€ biome.json              # Linter/formatter configuration
â”œâ”€â”€ setup-env.ts            # Environment setup script
â””â”€â”€ README.md               # This file
```

### ğŸ— Architecture Details

#### Frontend (apps/web)
- **File-based routing**: Routes organized in `routes/` folder following URL structure
- **Component organization**: Clear separation between base UI components and application-specific components
- **Generated code**: API client automatically generated via Kubb in `gen/` folder
- **Modern React patterns**: Custom hooks, contextual providers and organized utilities

#### Backend (apps/api) - DDD (Domain-Driven Design)
- **Domain Layer**: Pure business entities and rules, no external dependencies
- **Application Layer**: Use cases that orchestrate application operations
- **Infrastructure Layer**: Concrete implementations (database, authentication, configurations)
- **Presentation Layer**: HTTP layer with controllers, middlewares and route definitions

This architecture ensures:
- âœ… **Clear separation of concerns**
- âœ… **High testability** for each layer
- âœ… **Flexibility** for future changes
- âœ… **Long-term maintainability**

## âœ¨ Philosophy

This stack aims for:

* **Type safety everywhere** â€“ Zod, Drizzle, TypeBox, TypeScript-first
* **Minimal global state** â€“ Favor explicit data flow
* **Separation of concerns** â€“ No blurred lines between routing, logic, and data
* **Developer sanity** â€“ Fast tooling, zero-config DX, predictable file structure
* **Fullstack auth without complexity** â€“ Clerk handles both frontend and backend seamlessly

## ğŸ§  Final Note

If you need more than this to ship an MVP, you're solving the wrong problem.
If you keep this clean, you're building something worth keeping.
